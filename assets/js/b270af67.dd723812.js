"use strict";(self.webpackChunk_localrepo_grafast_website=self.webpackChunk_localrepo_grafast_website||[]).push([[5305],{30876:(e,r,t)=>{t.d(r,{Zo:()=>p,kt:()=>d});var n=t(2784);function a(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function s(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function o(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?s(Object(t),!0).forEach((function(r){a(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):s(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function l(e,r){if(null==e)return{};var t,n,a=function(e,r){if(null==e)return{};var t,n,a={},s=Object.keys(e);for(n=0;n<s.length;n++)t=s[n],r.indexOf(t)>=0||(a[t]=e[t]);return a}(e,r);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)t=s[n],r.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var i=n.createContext({}),c=function(e){var r=n.useContext(i),t=r;return e&&(t="function"==typeof e?e(r):o(o({},r),e)),t},p=function(e){var r=c(e.components);return n.createElement(i.Provider,{value:r},e.children)},u="mdxType",f={inlineCode:"code",wrapper:function(e){var r=e.children;return n.createElement(n.Fragment,{},r)}},m=n.forwardRef((function(e,r){var t=e.components,a=e.mdxType,s=e.originalType,i=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),u=c(t),m=a,d=u["".concat(i,".").concat(m)]||u[m]||f[m]||s;return t?n.createElement(d,o(o({ref:r},p),{},{components:t})):n.createElement(d,o({ref:r},p))}));function d(e,r){var t=arguments,a=r&&r.mdxType;if("string"==typeof e||a){var s=t.length,o=new Array(s);o[0]=m;var l={};for(var i in r)hasOwnProperty.call(r,i)&&(l[i]=r[i]);l.originalType=e,l[u]="string"==typeof e?e:a,o[1]=l;for(var c=2;c<s;c++)o[c]=t[c];return n.createElement.apply(null,o)}return n.createElement.apply(null,t)}m.displayName="MDXCreateElement"},22248:(e,r,t)=>{t.r(r),t.d(r,{assets:()=>i,contentTitle:()=>o,default:()=>f,frontMatter:()=>s,metadata:()=>l,toc:()=>c});var n=t(7896),a=(t(2784),t(30876));const s={},o="Next.js API route",l={unversionedId:"servers/next",id:"servers/next",title:"Next.js API route",description:"TODO: actually implement this!",source:"@site/grafserv/servers/next.md",sourceDirName:"servers",slug:"/servers/next",permalink:"/grafserv/servers/next",draft:!1,editUrl:"https://github.com/graphile/crystal/tree/main/grafast/website/grafserv/servers/next.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Lambda",permalink:"/grafserv/servers/lambda"},next:{title:"Node HTTP server",permalink:"/grafserv/servers/node"}},i={},c=[],p={toc:c},u="wrapper";function f(e){let{components:r,...t}=e;return(0,a.kt)(u,(0,n.Z)({},p,t,{components:r,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"nextjs-api-route"},"Next.js API route"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"TODO: actually implement this!")),(0,a.kt)("p",null,"Grafserv handles a number of API routes, so you should define one for each of\nthe things you care about. It's critical that you ensure that the paths line up\nwith those used in the Graphile config, otherwise the assets will not correctly\nbe served/referenced, this may cause issues when communicating between ","[Ruru][]","\nand GraphQL."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},'// utils/grafserv.mjs\nimport { grafserv } from "grafserv/next/v13";\nimport preset from "./graphile.config.mjs";\nimport schema from "./schema.mjs";\n\n// Create a shared Grafserv instance\nexport const serv = grafserv({ schema, preset });\n')),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},'// pages/api/graphql.mjs\nimport { serv } from "../../utils/grafserv.mjs";\n\n// Create and export the `/graphql` route handler\nconst handler = serv.createGraphQLHandler();\nexport default handler;\n')),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},'// pages/api/ruru.mjs\nimport { serv } from "../../utils/grafserv.mjs";\n\n// Create and export the `/ruru` route handler\nconst handler = serv.createRuruHandler();\nexport default handler;\n')))}f.isMDXComponent=!0}}]);