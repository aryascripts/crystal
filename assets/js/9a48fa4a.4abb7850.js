"use strict";(self.webpackChunk_localrepo_postgraphile_website=self.webpackChunk_localrepo_postgraphile_website||[]).push([[8311],{30876:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>m});var r=n(2784);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l=r.createContext({}),c=function(e){var t=r.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},p=function(e){var t=c(e.components);return r.createElement(l.Provider,{value:t},e.children)},u="mdxType",h={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),u=c(n),d=a,m=u["".concat(l,".").concat(d)]||u[d]||h[d]||o;return n?r.createElement(m,i(i({ref:t},p),{},{components:n})):r.createElement(m,i({ref:t},p))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,i=new Array(o);i[0]=d;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[u]="string"==typeof e?e:a,i[1]=s;for(var c=2;c<o;c++)i[c]=n[c];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}d.displayName="MDXCreateElement"},96921:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>h,frontMatter:()=>o,metadata:()=>s,toc:()=>c});var r=n(7896),a=(n(2784),n(30876));const o={title:"Naming conflict"},i=void 0,s={unversionedId:"errors/nc",id:"errors/nc",title:"Naming conflict",description:"You're probably here because you just received an error like:",source:"@site/postgraphile/errors/nc.md",sourceDirName:"errors",slug:"/errors/nc",permalink:"/postgraphile/next/errors/nc",draft:!1,editUrl:"https://github.com/graphile/crystal/tree/main/postgraphile/website/postgraphile/errors/nc.md",tags:[],version:"current",frontMatter:{title:"Naming conflict"}},l={},c=[],p={toc:c},u="wrapper";function h(e){let{components:t,...n}=e;return(0,a.kt)(u,(0,r.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"You're probably here because you just received an error like:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"Error: A naming conflict has occurred - two entities have tried to define the same key 'task'.\n  The first entity was:\n    Adding 'task' attribute field to GraphQL type 'Subtask' (representing PgCodec 'subtask')\n  The second entity was:\n    Adding field to GraphQL type 'Subtask' for singular relation 'taskByMyTask'\n  Details: https://err.red/pnc\n")),(0,a.kt)("p",null,"This happens when PostGraphile tries to add an entry to an object, where that\nobject already has an entry with that name. There is a very large number of\ncircumstances under which this can happen since the ",(0,a.kt)("inlineCode",{parentName:"p"},"build.extend")," method is\nused to avoid conflicts throughout the PostGraphile schema building process:\nwhen creating codecs, resources or relations; when adding attributes; when\ndefining GraphQL fields, arguments or enum values; and much more."),(0,a.kt)("p",null,"Fortunately we try and give you more details about how the error has come\nabout by detailing the key (",(0,a.kt)("inlineCode",{parentName:"p"},"'task'")," above) that has conflicted, and where the\nfirst and second conflicting entities originated from."),(0,a.kt)("p",null,"When reading about the entities, you should keep in mind that codec/PgCodec,\nresource/PgResource, and relation/PgCodecRelation relate to the concepts\ndescribed in the ",(0,a.kt)("a",{parentName:"p",href:"/postgraphile/next/registry"},"registry documentation"),"."),(0,a.kt)("p",null,"A common situation where this would occur is where you have two different\nthings (e.g. a column and a relationship) that are trying to be assigned to the\nsame field name in the GraphQL schema. This is particularly common when using\n",(0,a.kt)("inlineCode",{parentName:"p"},"@graphile/simplify-inflection")," because it deliberately shortens the names of\nrelations for better ergonomics (e.g. ",(0,a.kt)("inlineCode",{parentName:"p"},"userByAuthorId")," might become simply\n",(0,a.kt)("inlineCode",{parentName:"p"},"author"),"), at the risk of causing more conflicts - this is the main reason this\npreset isn't enabled by default."),(0,a.kt)("p",null,"Another common situation is where you have two things of the same type (e.g.\ntwo columns) whose names are made the same after inflection (e.g. columns named\n",(0,a.kt)("inlineCode",{parentName:"p"},"thing_2name"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"thing2_name"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"thing2name")," and ",(0,a.kt)("inlineCode",{parentName:"p"},"thing2Name")," would all transform\nto a GraphQL field called ",(0,a.kt)("inlineCode",{parentName:"p"},"thing2Name")," in the default inflectors)."),(0,a.kt)("p",null,"To resolve the issue, you should either:"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"use a ",(0,a.kt)("a",{parentName:"li",href:"/postgraphile/next/smart-tags"},"smart tag")," to assign a different name or field name to one or both of the entities, or"),(0,a.kt)("li",{parentName:"ol"},"use a custom inflector to change the way the names are generated for the entities, or"),(0,a.kt)("li",{parentName:"ol"},"do something else suitable for the situation.")),(0,a.kt)("p",null,"If you really are not sure what to do, please come ask us in the\n#help-and-support channel on our Discord at ",(0,a.kt)("a",{parentName:"p",href:"https://discord.gg/graphile"},"https://discord.gg/graphile")," - we\nmight even add the solution to this page for future users!"))}h.isMDXComponent=!0}}]);